
SOURCE_FOLDER := ../Source-Files-Folder
OBJECT_FOLDER := ../Object-Files-Folder
BINARY_FOLDER := ../Binary-Files-Folder

ENGINE_FOLDER := $(SOURCE_FOLDER)/Engine-Files-Folder
MASTER_FOLDER := $(SOURCE_FOLDER)/Master-Files-Folder
SCREEN_FOLDER := $(SOURCE_FOLDER)/Screen-Files-Folder

ENGINE_SOURCE := $(ENGINE_FOLDER)/Source-Files-Folder
ENGINE_HEADER := $(ENGINE_FOLDER)/Header-Files-Folder

MASTER_SOURCE := $(MASTER_FOLDER)/Source-Files-Folder
MASTER_HEADER := $(MASTER_FOLDER)/Header-Files-Folder
MASTER_MASTER := $(MASTER_FOLDER)/Master-Files-Folder

SCREEN_SOURCE := $(SCREEN_FOLDER)/Source-Files-Folder
SCREEN_HEADER := $(SCREEN_FOLDER)/Header-Files-Folder


MASTER_SOURCES := $(wildcard $(MASTER_SOURCE)/*.c)
MASTER_HEADERS := $(wildcard $(MASTER_HEADER)/*.h)

ENGINE_SOURCES := $(wildcard $(ENGINE_SOURCE)/*.c)
ENGINE_HEADERS := $(wildcard $(ENGINE_HEADER)/*.h)

SCREEN_SOURCES := $(wildcard $(SCREEN_SOURCE)/*.c)
SCREEN_HEADERS := $(wildcard $(SCREEN_HEADER)/*.h)


ENGINE_OBJECTS := $(patsubst $(ENGINE_SOURCE)/%.c, $(OBJECT_FOLDER)/%.o, $(ENGINE_SOURCES))
SCREEN_OBJECTS := $(patsubst $(SCREEN_SOURCE)/%.c, $(OBJECT_FOLDER)/%.o, $(SCREEN_SOURCES))
MASTER_OBJECTS := $(patsubst $(MASTER_SOURCE)/%.c, $(OBJECT_FOLDER)/%.o, $(MASTER_SOURCES))

SDL_SOURCE_FILES := $(MASTER_SOURCES) $(SCREEN_SOURCES) $(ENGINE_SOURCES)
SDL_HEADER_FILES := $(MASTER_HEADERS) $(SCREEN_HEADERS) $(ENGINE_HEADERS)
SDL_OBJECT_FILES := $(MASTER_OBJECTS) $(SCREEN_OBJECTS) $(ENGINE_OBJECTS)

STD_SOURCE_FILES := $(ENGINE_SOURCES)
STD_HEADER_FILES := $(ENGINE_HEADERS)
STD_OBJECT_FILES := $(ENGINE_OBJECTS)


COMPILE_COMPILOR := gcc
COMPILE_FLAGS := -Wall -Werror

SDL_LIB_FLAGS := -lSDL2main -lSDL2 -lSDL2_image -lSDL2_ttf -lSDL2_mixer
SDL_DIR_FLAGS := -ISDL2/include -LSDL2/lib

WIN_SDL_FLAGS := $(SDL_DIR_FLAGS) -lmingw32 $(SDL_LIB_FLAGS)
MAC_SDL_FLAGS := `sdl2-config --libs --cflags` $(SDL_LIB_FLAGS)

SDL_EXECUTE_FLAGS := $(MAC_SDL_FLAGS) -lm
STD_EXECUTE_FLAGS := -lm


.PRECIOUS: $(OBJECT_FILES)

SDL_PROGRAMS := minesweeper
STD_PROGRAMS :=

$(SDL_PROGRAMS): %: $(OBJECT_FOLDER)/%.o $(SDL_OBJECT_FILES) $(MASTER_MASTER)/%.c $(SDL_SOURCE_FILES) $(SDL_HEADER_FILES)
	$(COMPILE_COMPILOR) $(SDL_OBJECT_FILES) $(OBJECT_FOLDER)/$@.o $(COMPILE_FLAGS) $(SDL_EXECUTE_FLAGS) -o $@

$(STD_PROGRAMS): %: $(OBJECT_FOLDER)/%.o $(STD_OBJECT_FILES) $(MASTER_MASTER)/%.c $(STD_SOURCE_FILES) $(STD_HEADER_FILES)
	$(COMPILE_COMPILOR) $(STD_OBJECT_FILES) $(OBJECT_FOLDER)/$@.o $(COMPILE_FLAGS) $(STD_EXECUTE_FLAGS) -o $@


$(OBJECT_FOLDER)/%.o: $(ENGINE_SOURCE)/%.c $(ENGINE_HEADER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(SCREEN_SOURCE)/%.c $(SCREEN_HEADER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(MASTER_SOURCE)/%.c $(MASTER_HEADER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(MASTER_MASTER)/%.c
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@
